webpackJsonp([3],{"4BSn":function(t,e,s){"use strict";function r(t){s("6Hat")}Object.defineProperty(e,"__esModule",{value:!0});var a=s("P9l9"),o=s("dgPx"),n=s("y/jF"),i=s("tRvw"),l={data:function(){return{category:[],title:"",params:{search:"",page:"1"},getGoodFlag:!1,getMoreFlag:!0,flag:!0,total:0}},created:function(){document.title="搜索结果|KeepMoving",this._initCategory()},mounted:function(){window.addEventListener("scroll",this.handleScroll)},watch:{"$route.params":"_initCategory"},methods:{_initCategory:function(){if(this.category=[],this.params.search=this.$route.params.keyword,this.params.page=1,this.showMore=!0,this.getGoodFlag=!1,this.getMoreFlag=!0,this.total=0,!this.params.search||this.params.search.match(/^\s+$/))return void(this.params.search="");this.params.search&&this._getGoods()},_normalizeTitle:function(){this.title="搜索结果 / "+this.total+"件商品"},_normalizeItem:function(){"male"!==this.item1&&"female"!==this.item1||(this.params.gender1=this.item1,this.params.gender2="neutral"),"new"===this.item1&&(this.params.is_new=!0),"sale"===this.item1&&(this.params.is_sale=!0),"sneakers"===this.item2&&(this.params.category="踩的"),"clothing"===this.item2&&(this.params.category="穿的"),"accessories"===this.item2&&(this.params.category="戴的");var t=window.location.href,e=t.match(/ordering=(.*)/);return e&&(this.params.ordering=e[1]),this.params},_getGoods:function(){var t=this;Object(a.k)(this._normalizeItem()).then(function(e){t.category=e.data.results,t.total=e.data.count,t._normalizeTitle(),t.total<12&&(t.showMore=!1),t.getGoodFlag=!0})},handleScroll:function(){if(this.getGoodFlag&&this.getMoreFlag&&document.body.scrollHeight-window.scrollY<1e3){if(this.getMoreFlag=!1,this.total<=12||!1===this.showMore)return;this.params.page++,this.getMore()}},getMore:function(){var t=this;Object(a.k)(this._normalizeItem()).then(function(e){e.data.next||(t.showMore=!1),t.category=t.category.concat(e.data.results),t.getMoreFlag=!0})}},components:{GoodList:o.a,Loading:n.a,NoResult:i.a}},c=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"button-wrapper"},[s("el-dropdown",[s("span",{staticClass:"el-dropdown-link"},[t._v("\n        筛选"),s("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),t._v(" "),s("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[s("el-dropdown-item",[s("router-link",{attrs:{to:"/search-results/"+t.$route.params.keyword+"?ordering=price"}},[s("span",[t._v("价格 ↑")])])],1),t._v(" "),s("el-dropdown-item",{attrs:{divided:""}},[s("router-link",{attrs:{to:"/search-results/"+t.$route.params.keyword+"?ordering=-price"}},[s("span",[t._v("价格 ↓")])])],1),t._v(" "),s("el-dropdown-item",{attrs:{divided:""}},[s("router-link",{attrs:{to:"/search-results/"+t.$route.params.keyword+"?ordering=sold_num"}},[s("span",[t._v("销量 ↑")])])],1),t._v(" "),s("el-dropdown-item",{attrs:{divided:""}},[s("router-link",{attrs:{to:"/search-results/"+t.$route.params.keyword+"?ordering=-sold_num"}},[s("span",[t._v("销量 ↓")])])],1)],1)],1)],1),t._v(" "),""!==t.params.search?s("good-list",{attrs:{title:t.title,goods:t.category,adjust:!0}}):t._e(),t._v(" "),s("loading",{directives:[{name:"show",rawName:"v-show",value:t.showMore&&""!==t.params.search,expression:"showMore && params.search !== ''"}]}),t._v(" "),s("no-result",{directives:[{name:"show",rawName:"v-show",value:!t.category.length&&t.getGoodFlag,expression:"!category.length && getGoodFlag"}],attrs:{title:"抱歉，暂时找不到相关商品"}})],1)},p=[],d={render:c,staticRenderFns:p},u=d,h=s("X4nt"),g=r,m=h(l,u,!1,g,"data-v-4b49e744",null);e.default=m.exports},"6Hat":function(t,e,s){var r=s("Hn7r");"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);s("8bSs")("040cc20e",r,!0)},Hn7r:function(t,e,s){e=t.exports=s("I71c")(!0),e.push([t.i,"\n.button-wrapper[data-v-4b49e744] {\n  position: absolute;\n  right: 40px;\n  top: 240px;\n  z-index: 50;\n}\n.button-wrapper span[data-v-4b49e744] {\n  letter-spacing: 1px;\n}","",{version:3,sources:["D:/workspace/keepmoving/src/components/search-results/search-results.vue"],names:[],mappings:";AACA;EACE,mBAAmB;EACnB,YAAY;EACZ,WAAW;EACX,YAAY;CACb;AACD;EACE,oBAAoB;CACrB",file:"search-results.vue",sourcesContent:["\n.button-wrapper[data-v-4b49e744] {\n  position: absolute;\n  right: 40px;\n  top: 240px;\n  z-index: 50;\n}\n.button-wrapper span[data-v-4b49e744] {\n  letter-spacing: 1px;\n}"],sourceRoot:""}])},hKa2:function(t,e,s){t.exports=s.p+"static/img/star.b0433d0.png"},pDIK:function(t,e,s){var r=s("ymz5");"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);s("8bSs")("43a8edaf",r,!0)},tRvw:function(t,e,s){"use strict";function r(t){s("pDIK")}var a={props:{title:{type:String,default:""}}},o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"no-result"},[t._m(0),t._v(" "),s("p",{staticClass:"no-result-text"},[t._v(t._s(t.title))])])},n=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"no-result-icon"},[r("img",{attrs:{src:s("hKa2"),height:"128",width:"128"}})])}],i={render:o,staticRenderFns:n},l=i,c=s("X4nt"),p=r,d=c(a,l,!1,p,"data-v-02683276",null);e.a=d.exports},ymz5:function(t,e,s){e=t.exports=s("I71c")(!0),e.push([t.i,"\n.no-result[data-v-02683276] {\n  text-align: center;\n}\n.no-result .no-result-icon[data-v-02683276] {\n  margin-top: 30px;\n}\n.no-result .no-result-text[data-v-02683276] {\n  margin: 30px 0;\n  font-size: 14px;\n  color: #696969;\n}","",{version:3,sources:["D:/workspace/keepmoving/src/base/no-result/no-result.vue"],names:[],mappings:";AACA;EACE,mBAAmB;CACpB;AACD;EACE,iBAAiB;CAClB;AACD;EACE,eAAe;EACf,gBAAgB;EAChB,eAAe;CAChB",file:"no-result.vue",sourcesContent:["\n.no-result[data-v-02683276] {\n  text-align: center;\n}\n.no-result .no-result-icon[data-v-02683276] {\n  margin-top: 30px;\n}\n.no-result .no-result-text[data-v-02683276] {\n  margin: 30px 0;\n  font-size: 14px;\n  color: #696969;\n}"],sourceRoot:""}])}});
//# sourceMappingURL=3.cf0ab2816ee6f942ab08.js.map